window.ycPay=null,window.setupYouCanPayForm=(()=>{try{switch(null==window.ycPay&&(window.ycPay=new YCPay(youcan_pay_script_vars.key,{locale:youcan_pay_script_vars.locale}),1===parseInt(youcan_pay_script_vars.is_test_mode)&&window.ycPay.setSandboxMode(!0)),jQuery("input[name=payment_method]:checked").val()){case youcan_pay_script_vars.gateways.youcanpay:window.ycPay.renderForm("#payment-card","default");break;case youcan_pay_script_vars.gateways.cash_plus:window.ycPay.renderCashPlusForm("#container-cash-plus","default")}}catch(e){console.error(e)}}),jQuery(function(e){function a(a,o){e("html, body").animate({scrollTop:e(".woocommerce").offset().top},400),e(".blockOverlay").remove(),e(".woocommerce-notices-wrapper").remove(),a.removeClass("processing"),null!=o&&(clearInterval(o),e(".woocommerce-NoticeGroup-checkout").remove())}function o(e,o){if(void 0!==o.token_transaction){var r=null;try{r=setInterval(function(){jQuery("#ycp-3ds-modal").length>0&&a(e,r)},500),window.ycPay.pay(o.token_transaction).then(function(c){if(a(e,r),void 0===o.redirect_url){if(void 0!==o.redirect){let e=new URL(o.redirect);e.searchParams.set("transaction_id",c),window.location.href=e.href}}else window.location.href=o.redirect_url}).catch(function(o){a(e,r);let n=c.clone();n.append('<ul class="woocommerce-error" role="alert"></ul>'),n.find("ul").append("<li>"+o+"</li>"),e.prepend(n)})}catch(o){a(e,r),console.error(o)}}}function r(r){e.ajax({method:"POST",url:youcan_pay_script_vars.checkout_url,data:r.serialize(),dataType:"json",beforeSend:function(){try{e(".woocommerce-NoticeGroup-checkout").remove(),r.addClass("processing"),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}catch(e){console.error(e)}}}).done(function(e){(function(e,a){if(void 0!==a.messages){let o=c.clone();return o.append(a.messages),e.prepend(o),!0}return!1})(r,e)||o(r,e)}).fail(function(e){}).always(function(e){void 0===e.token_transaction&&a(r)})}var c=e('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"></div>');e(document).on("click","#place_order",function(a){a.preventDefault();var c=e("form[name=checkout]");if(c.length<1&&(c=e("#order_review")),c.is(".processing"))return!1;switch(e("input[name=payment_method]:checked").val()){case youcan_pay_script_vars.gateways.youcanpay:case youcan_pay_script_vars.gateways.cash_plus:if(!0==(parseInt(youcan_pay_script_vars.is_pre_order)===parseInt(youcan_pay_script_vars.order_actions.pre_order)))return o(c,{token_transaction:youcan_pay_script_vars.token_transaction,redirect:youcan_pay_script_vars.redirect}),!0;r(c);break;case youcan_pay_script_vars.gateways.standalone:c.submit()}}),e(document).on("change","[name=payment_method]",function(e){window.setupYouCanPayForm()})});