window.ycPay=null,window.setupYouCanPayForm=(()=>{try{null==window.ycPay&&(window.ycPay=new YCPay(youcan_pay_script_vars.key,{locale:youcan_pay_script_vars.youcanpay_locale}),1===parseInt(youcan_pay_script_vars.is_test_mode)&&window.ycPay.setSandboxMode(!0)),window.ycPay.renderForm("#payment-card","default")}catch(e){console.error(e)}}),jQuery(function(e){function o(o){e("html, body").animate({scrollTop:e(".woocommerce").offset().top},400),e(".blockOverlay").remove(),e(".woocommerce-NoticeGroup-checkout").remove(),e(".woocommerce-notices-wrapper").remove(),o.removeClass("processing")}function r(r,c){if(void 0!==c.token_transaction)try{var n=setInterval(function(){e(".blockOverlay").length>0&&(clearInterval(n),o(r))},500);window.ycPay.pay(c.token_transaction).then(function(e){if(o(r),void 0===c.redirect_url){if(void 0!==c.redirect){let o=new URL(c.redirect);o.searchParams.set("transaction_id",e),window.location.href=o.href}}else window.location.href=c.redirect_url}).catch(function(e){o(r);let c=a.clone();c.append('<ul class="woocommerce-error" role="alert"></ul>'),c.find("ul").append("<li>"+e+"</li>"),r.prepend(c)})}catch(e){console.error(e)}}var a=e('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"></div>');e(document).on("click","#place_order",function(c){c.preventDefault();var n=e("form[name=checkout]");if(n.length<1&&(n=e("#order_review")),n.is(".processing"))return!1;e("input[name=payment_method]:checked").val()===youcan_pay_script_vars.youcanpay?youcan_pay_script_vars.is_pre_order===youcan_pay_script_vars.order_status.pre_order?r(n,{token_transaction:youcan_pay_script_vars.token_transaction,redirect:youcan_pay_script_vars.redirect}):e.ajax({method:"POST",url:youcan_pay_script_vars.checkout_url,data:n.serialize(),dataType:"json",beforeSend:function(){try{n.addClass("processing"),n.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}catch(e){console.error(e)}}}).done(function(e){(function(e,o){if(void 0!==o.messages){let o=a.clone();return o.append(messages),e.prepend(o),!0}return!1})(n,e)||r(n,e)}).fail(function(e){}).always(function(e){void 0===e.token_transaction&&o(n)}):n.submit()})});