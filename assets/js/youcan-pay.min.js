window.ycPay=null,window.setupYouCanPayForm=(()=>{try{null==window.ycPay&&(window.ycPay=new YCPay(youcan_pay_script_vars.key,{locale:youcan_pay_script_vars.youcanpay_locale}),1===parseInt(youcan_pay_script_vars.is_test_mode)&&(window.ycPay.isSandboxMode=!0)),window.ycPay.renderForm("#payment-card")}catch(o){console.error(o)}}),jQuery(function(o){function e(e){o("html, body").animate({scrollTop:o(".woocommerce").offset().top},400),o(".blockOverlay").remove(),e.removeClass("processing")}var c=o('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"></div>');o(document).on("click","#place_order",function(a){a.preventDefault();var r=o("form[name=checkout]");if(r.is(".processing"))return!1;o("input[name=payment_method]:checked").val()===youcan_pay_script_vars.youcanpay?o.ajax({method:"POST",url:youcan_pay_script_vars.checkout_url,data:r.serialize(),dataType:"json",beforeSend:function(e){try{r.addClass("processing"),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),o(".woocommerce-NoticeGroup-checkout").remove()}catch(o){console.error(o)}}}).done(function(o){if(void 0!==o.messages){let e=c.clone();return e.append(o.messages),void r.prepend(e)}if(void 0!==o.token_transaction)try{window.ycPay.pay(o.token_transaction).then(function(e){if(void 0===o.redirect_url){if(void 0!==o.redirect){let c=new URL(o.redirect);c.searchParams.set("transaction_id",e),window.location.href=c.href}}else window.location.href=o.redirect_url}).catch(function(o){e(r);let a=c.clone();a.append('<ul class="woocommerce-error" role="alert"></ul>'),a.find("ul").append("<li>"+o+"</li>"),r.prepend(a)})}catch(o){console.error(o)}}).fail(function(o){}).always(function(o){void 0===o.token_transaction&&e(r)}):r.submit()})});